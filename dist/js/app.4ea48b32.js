(function(e){function t(t){for(var i,s,r=t[0],l=t[1],c=t[2],u=0,f=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);d&&d(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],i=!0,r=1;r<o.length;r++){var l=o[r];0!==n[l]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=o[0]))}return e}var i={},n={app:0},a=[];function s(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=i,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(o,i,function(t){return e[t]}.bind(null,i));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/jsplumb-vue-wordFlow/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0a29":function(e,t,o){"use strict";o("8b54")},2395:function(e,t,o){},"263f":function(e,t,o){},2781:function(e,t,o){e.exports=o.p+"img/6数据校验.cf8bef7c.svg"},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},a=[],s=(o("7c55"),o("2877")),r={},l=Object(s["a"])(r,n,a,!1,null,null,null),c=l.exports,d=o("8c4f"),u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"flow_region"},[o("div",{staticClass:"nodes-wrap"},e._l(e.nodeTypeList,(function(t){return o("div",{key:t.type,staticClass:"node",attrs:{draggable:"true"},on:{dragstart:function(o){return e.drag(o,t)}}},[o("div",{staticClass:"log"},[o("img",{attrs:{src:t.logImg,alt:""}})]),o("div",{staticClass:"name"},[e._v(e._s(t.typeName))])])})),0),o("div",{ref:"flowWrap",staticClass:"flow-wrap",attrs:{id:"flowWrap"},on:{drop:function(t){return e.drop(t)},dragover:function(t){return e.allowDrop(t)}}},[o("div",{attrs:{id:"flow"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.auxiliaryLine.isShowXLine,expression:"auxiliaryLine.isShowXLine"}],staticClass:"auxiliary-line-x",style:{width:e.auxiliaryLinePos.width,top:e.auxiliaryLinePos.y+"px",left:e.auxiliaryLinePos.offsetX+"px"}}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.auxiliaryLine.isShowYLine,expression:"auxiliaryLine.isShowYLine"}],staticClass:"auxiliary-line-y",style:{height:e.auxiliaryLinePos.height,left:e.auxiliaryLinePos.x+"px",top:e.auxiliaryLinePos.offsetY+"px"}}),e._l(e.data.nodeList,(function(t){return o("flowNode",{key:t.id,attrs:{id:t.id,node:t},on:{setNodeName:e.setNodeName,deleteNode:e.deleteNode,changeLineState:e.changeLineState}})}))],2)])])},f=[],m=o("5530"),p=o("e193"),h=[{type:"start",typeName:"开始",nodeName:"开始",logImg:o("8d76"),log_bg_color:"rgba(0, 128, 0, 0.2)"},{type:"end",typeName:"结束",nodeName:"结束",logImg:o("8cf3"),log_bg_color:"rgba(255, 0, 0, 0.2)"},{type:"dataSet",typeName:"文件",nodeName:"文件",logImg:o("7191"),log_bg_color:"rgba(0, 128, 0, 0.2)"},{type:"encode",typeName:"加密",nodeName:"加密",logImg:o("2781"),log_bg_color:"rgba(163, 117, 233, 0.2)"},{type:"personService",typeName:"个人服务",nodeName:"个人服务",logImg:o("fc27"),log_bg_color:"rgba(132, 166, 251, 0.2)"},{type:"arrange",typeName:"清洗",nodeName:"清洗",logImg:o("ade3"),log_bg_color:"rgba(250, 205, 81, 0.2)"}],g={grid:[10,10],Anchors:["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],Container:"flow",Connector:["Flowchart",{cornerRadius:5,alwaysRespectStubs:!0,stub:5}],ConnectionsDetachable:!1,DeleteEndpointsOnDetach:!1,Endpoint:["Rectangle",{height:10,width:10}],EndpointStyle:{fill:"rgba(255,255,255,0)",outlineWidth:1},LogEnabled:!1,PaintStyle:{stroke:"#409eff",strokeWidth:2},HoverPaintStyle:{stroke:"#ff00cc",strokeWidth:2},Overlays:[["Arrow",{width:8,length:8,location:1}]],RenderMode:"svg"},b={isSource:!0,isTarget:!0,anchor:["TopCenter","RightMiddle","BottomCenter","LeftMiddle"]},v={filter:".node-anchor",filterExclude:!1,anchor:["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],allowLoopback:!1},y={filter:".node-anchor",filterExclude:!1,anchor:["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],allowLoopback:!1},w=(o("4160"),o("d81d"),o("45fc"),o("a434"),o("a9e3"),o("ac1f"),o("1276"),o("159b"),o("7d05")),x=o.n(w);o("1157"),o("d3b7"),o("25f0");function N(e){return Number(Math.random().toString().substr(3,e)+Date.now()).toString(36)}var L={init:function(){var e=this;this.jsPlumb.ready((function(){e.jsPlumb.importDefaults(e.jsplumbSetting),e.jsPlumb.bind("beforeDrop",(function(e){var t=function(){};return t})),e.jsPlumb.bind("connection",(function(t){e.addLine(t)})),e.jsPlumb.bind("dblclick",(function(t,o){e.confirmDelLine(t)})),e.jsPlumb.bind("connectionDetached",(function(t){e.deleLine(t)})),e.loadEasyFlow(),e.jsPlumb.setSuspendDrawing(!1,!0)})),this.initPanZoom()},loadEasyFlow:function(){for(var e=this,t=0;t<this.data.nodeList.length;t++){var o=this.data.nodeList[t];this.jsPlumb.makeSource(o.id,this.jsplumbSourceOptions),this.jsPlumb.makeTarget(o.id,this.jsplumbTargetOptions),this.draggableNode(o.id)}this.jsPlumb.unbind("connection");for(var i=0;i<this.data.lineList.length;i++){var n=this.data.lineList[i];this.jsPlumb.connect({source:n.from,target:n.to},this.jsplumbConnectOptions)}this.jsPlumb.bind("connection",(function(t){var o=t.source.id,i=t.target.id;e.data.lineList.push({from:o,to:i,label:"连线名称",id:N(8),Remark:""})}))},draggableNode:function(e){var t=this;this.jsPlumb.draggable(e,{grid:this.commonGrid,drag:function(o){t.alignForLine(e,o.pos)},start:function(){},stop:function(o){t.auxiliaryLine.isShowXLine=!1,t.auxiliaryLine.isShowYLine=!1,t.changeNodePosition(e,o.pos)}})},alignForLine:function(e,t){var o=this,i=!1,n=!1;this.data.nodeList.some((function(a){a.id!==e&&a.left==t[0]+"px"&&(o.auxiliaryLinePos.x=t[0]+60,n=!0),a.id!==e&&a.top==t[1]+"px"&&(o.auxiliaryLinePos.y=t[1]+20,i=!0)})),this.auxiliaryLine.isShowYLine=n,this.auxiliaryLine.isShowXLine=i},changeNodePosition:function(e,t){this.data.nodeList.some((function(o){return e==o.id&&(o.left=t[0]+"px",o.top=t[1]+"px",!0)}))},drag:function(e,t){this.currentItem=t},drop:function(e){var t=this.jsPlumb.getContainer().getBoundingClientRect(),o=this.getScale(),i=(e.pageX-t.left-60)/o,n=(e.pageY-t.top-20)/o,a=Object(m["a"])(Object(m["a"])({},this.currentItem),{},{id:N(8),top:20*Math.round(n/20)+"px",left:20*Math.round(i/20)+"px"});this.addNode(a)},addLine:function(e){var t=e.source.id,o=e.target.id;this.data.lineList.push({from:t,to:o,label:"连线名称",id:N(8),Remark:""})},confirmDelLine:function(e){var t=this;this.$Modal.confirm({title:"删除连线",content:"<p>确认删除该连线？</p>",onOk:function(){t.jsPlumb.deleteConnection(e)}})},deleLine:function(e){var t=this;this.data.lineList.forEach((function(o,i){o.from===e.sourceId&&o.to===e.targetId&&t.data.lineList.splice(i,1)}))},allowDrop:function(e){e.preventDefault()},getScale:function(){var e;if(this.jsPlumb.pan){var t=this.jsPlumb.pan.getTransform(),o=t.scale;e=o}else{var i=window.getComputedStyle(this.jsPlumb.getContainer()).transform;e=1*i.split(", ")[3]}return this.jsPlumb.setZoom(e),e},addNode:function(e){var t=this;this.data.nodeList.push(e),this.$nextTick((function(){t.jsPlumb.makeSource(e.id,t.jsplumbSourceOptions),t.jsPlumb.makeTarget(e.id,t.jsplumbTargetOptions),t.draggableNode(e.id)}))},initPanZoom:function(){var e=this,t=this.jsPlumb.getContainer(),o=t.parentNode,i=x()(t,{smoothScroll:!1,bounds:!0,zoomDoubleClickSpeed:1,minZoom:.5,maxZoom:2,beforeWheel:function(e){console.log(e)},beforeMouseDown:function(e){var t=e.ctrlKey;return t}});this.jsPlumb.mainContainerWrap=o,this.jsPlumb.pan=i,i.on("zoom",(function(t){var o=t.getTransform(),i=o.x,n=o.y,a=o.scale;e.jsPlumb.setZoom(a),e.auxiliaryLinePos.width=1/a*100+"%",e.auxiliaryLinePos.height=1/a*100+"%",e.auxiliaryLinePos.offsetX=-i/a,e.auxiliaryLinePos.offsetY=-n/a})),i.on("panend",(function(t){var o=t.getTransform(),i=o.x,n=o.y,a=o.scale;e.auxiliaryLinePos.width=1/a*100+"%",e.auxiliaryLinePos.height=1/a*100+"%",e.auxiliaryLinePos.offsetX=-i/a,e.auxiliaryLinePos.offsetY=-n/a})),o.style.cursor="grab",o.addEventListener("mousedown",(function(){this.style.cursor="grabbing",o.addEventListener("mouseout",(function(){this.style.cursor="grab"}))})),o.addEventListener("mouseup",(function(){this.style.cursor="grab"}))},setNodeName:function(e,t){this.data.nodeList.some((function(o){return o.id===e&&(o.nodeName=t,!0)}))},deleteNode:function(e){var t=this;this.data.nodeList.some((function(o,i){return o.id===e.id&&(t.data.nodeList.splice(i,1),t.jsPlumb.remove(o.id),!0)}))},changeLineState:function(e,t){console.log(t);var o=this.jsPlumb.getAllConnections();o.forEach((function(o){o.targetId!==e&&o.sourceId!==e||(t?o.canvas.classList.add("active"):o.canvas.classList.remove("active"))}))},fixNodesPosition:function(){if(this.data.nodeList&&this.$refs.flowWrap){var e=120,t=40,o=this.$refs.flowWrap.getBoundingClientRect(),i=0,n=o.width,a=0,s=o.height,r={left:0,right:0,top:0,bottom:0},l=0,c=0;this.data.nodeList.forEach((function(e){var t=Number(e.top.substring(0,e.top.length-2)),o=Number(e.left.substring(0,e.left.length-2));i=o>i?o:i,n=o<n?o:n,a=t>a?t:a,s=t<s?t:s})),r.left=n,r.right=o.width-i-e,r.top=s,r.bottom=o.height-a-t,l=r.top!==r.bottom?(r.bottom-r.top)/2:0,c=r.left!==r.right?(r.right-r.left)/2:0,this.data.nodeList.map((function(e){var t=Number(e.top.substring(0,e.top.length-2))+l,o=Number(e.left.substring(0,e.left.length-2))+c;e.top=20*Math.round(t/20)+"px",e.left=20*Math.round(o/20)+"px"}))}}},j=L,P=o("f364"),S=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.setNotActive,expression:"setNotActive"}],ref:"node",staticClass:"node-item",class:[e.isActive||e.isSelected?"active":""],style:e.flowNodeContainer,on:{click:e.setActive,mouseenter:e.showAnchor,mouseleave:e.hideAnchor,dblclick:function(t){return t.preventDefault(),e.editNode(t)},contextmenu:function(t){return t.preventDefault(),e.onContextmenu(t)}}},[o("div",{staticClass:"log-wrap"},[o("img",{attrs:{src:e.node.logImg,alt:""}})]),o("div",{staticClass:"nodeName"},[e._v(e._s(e.node.nodeName))]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.mouseEnter,expression:"mouseEnter"}],staticClass:"node-anchor anchor-top"}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.mouseEnter,expression:"mouseEnter"}],staticClass:"node-anchor anchor-right"}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.mouseEnter,expression:"mouseEnter"}],staticClass:"node-anchor anchor-bottom"}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.mouseEnter,expression:"mouseEnter"}],staticClass:"node-anchor anchor-left"})])},C=[],_=o("e67d"),k=o.n(_),O={name:"nodeItem",props:{node:Object},directives:{ClickOutside:k.a},computed:{flowNodeContainer:{get:function(){return{top:this.node.top,left:this.node.left}}}},data:function(){return{mouseEnter:!1,isActive:!1,isSelected:!1}},methods:{showAnchor:function(){this.mouseEnter=!0},hideAnchor:function(){this.mouseEnter=!1},onContextmenu:function(){var e=this;this.$contextmenu({items:[{label:"删除",disabled:!1,icon:"",onClick:function(){e.deleteNode()}}],event:event,customClass:"custom-class",zIndex:9999,minWidth:180})},setActive:function(){var e=this;if(window.event.ctrlKey)return this.isSelected=!this.isSelected,!1;this.isActive=!0,this.isSelected=!1,setTimeout((function(){e.$emit("changeLineState",e.node.id,!0)}),0)},setNotActive:function(){window.event.ctrlKey||(this.isSelected=!1),this.isActive&&(this.$emit("changeLineState",this.node.id,!1),this.isActive=!1)},editNode:function(){var e=this;this.newNodeName=this.node.nodeName,this.$Modal.confirm({render:function(t){return t("Input",{props:{value:e.newNodeName,autofocus:!0},on:{input:function(t){e.newNodeName=t}}})},onOk:function(){console.log(e.newNodeName),e.$emit("setNodeName",e.node.id,e.newNodeName)}})},deleteNode:function(){this.$emit("deleteNode",this.node)}}},E=O,I=(o("b6e2"),Object(s["a"])(E,S,C,!1,null,"250849a0",null)),M=I.exports,T={name:"FlowEdit",components:{flowNode:M},data:function(){return{jsPlumb:null,currentItem:null,nodeTypeList:h,data:P,selectedList:[],jsplumbSetting:g,jsplumbConnectOptions:b,jsplumbSourceOptions:v,jsplumbTargetOptions:y,auxiliaryLine:{isShowXLine:!1,isShowYLine:!1},auxiliaryLinePos:{width:"100%",height:"100%",offsetX:0,offsetY:0,x:20,y:20},commonGrid:[5,5],selectModuleFlag:!1,rectAngle:{px:"",py:"",left:0,top:0,height:0,width:0}}},mounted:function(){var e=this;this.jsPlumb=p["jsPlumb"].getInstance(),this.fixNodesPosition(),this.$nextTick((function(){e.init()}))},methods:Object(m["a"])({},j)},A=T,R=(o("0a29"),o("efc9"),Object(s["a"])(A,u,f,!1,null,"4903ac9d",null)),D=R.exports;i["default"].use(d["a"]);var $=[{path:"/",name:"Home",component:D}],q=new d["a"]({routes:$}),W=q,X=o("2f62");i["default"].use(X["a"]);var Y=new X["a"].Store({state:{},mutations:{},actions:{},modules:{}}),z=o("e5d9"),F=o("f825"),B=o.n(F);o("f8ce"),o("cd22");i["default"].config.productionTip=!1,i["default"].use(z["a"]),i["default"].use(B.a),new i["default"]({router:W,store:Y,render:function(e){return e(c)}}).$mount("#app")},7191:function(e,t,o){e.exports=o.p+"img/5文件数据.0b1cab17.svg"},"7c55":function(e,t,o){"use strict";o("2395")},"8b54":function(e,t,o){},"8cf3":function(e,t,o){e.exports=o.p+"img/2结束.fd7a8681.svg"},"8d76":function(e,t,o){e.exports=o.p+"img/1开始.a75a36c3.svg"},ade3:function(e,t,o){e.exports=o.p+"img/15清洗.588c5af8.svg"},b3a7:function(e,t,o){},b6e2:function(e,t,o){"use strict";o("b3a7")},cd22:function(e,t,o){},efc9:function(e,t,o){"use strict";o("263f")},f364:function(e){e.exports=JSON.parse('{"nodeList":[{"type":"start","typeName":"开始","nodeName":"开始","logImg":"/img/1开始.a75a36c3.svg","log_bg_color":"rgba(0, 128, 0, 0.2)","id":"34v56ha2l9c000","top":"160px","left":"100px"},{"type":"dataSet","typeName":"文件","nodeName":"文件","logImg":"/img/5文件数据.0b1cab17.svg","log_bg_color":"rgba(0, 128, 0, 0.2)","id":"5sdjugrcqhc000","top":"160px","left":"315px"},{"type":"encode","typeName":"加密","nodeName":"加密","logImg":"/img/6数据校验.cf8bef7c.svg","log_bg_color":"rgba(163, 117, 233, 0.2)","id":"3atqi5p6oa4000","top":"80px","left":"600px"},{"type":"personService","typeName":"个人服务","nodeName":"个人服务","logImg":"/img/8个人服务.ec54f18b.svg","log_bg_color":"rgba(132, 166, 251, 0.2)","id":"49vcu89p5q0000","top":"245px","left":"600px"},{"type":"arrange","typeName":"清洗","nodeName":"清洗","logImg":"/img/15清洗.588c5af8.svg","log_bg_color":"rgba(250, 205, 81, 0.2)","id":"1jhiilb0t2tc00","top":"180px","left":"880px"},{"type":"end","typeName":"结束","nodeName":"结束","logImg":"/img/2结束.fd7a8681.svg","log_bg_color":"rgba(255, 0, 0, 0.2)","id":"1ogr3wzy6zhc00","top":"180px","left":"1160px"}],"lineList":[{"from":"34v56ha2l9c000","to":"5sdjugrcqhc000","label":"连线名称","id":"5n6pp5xqd6s000","Remark":""},{"from":"5sdjugrcqhc000","to":"3atqi5p6oa4000","label":"连线名称","id":"2a0ya9j1kev400","Remark":""},{"from":"5sdjugrcqhc000","to":"49vcu89p5q0000","label":"连线名称","id":"zoisvo5gpvk00","Remark":""},{"from":"3atqi5p6oa4000","to":"1jhiilb0t2tc00","label":"连线名称","id":"4xkb3dju1g0000","Remark":""},{"from":"49vcu89p5q0000","to":"1jhiilb0t2tc00","label":"连线名称","id":"ldc917l47w000","Remark":""},{"from":"1jhiilb0t2tc00","to":"1ogr3wzy6zhc00","label":"连线名称","id":"478galw3u34000","Remark":""}]}')},fc27:function(e,t,o){e.exports=o.p+"img/8个人服务.ec54f18b.svg"}});